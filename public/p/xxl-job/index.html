<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="XXL-JOB XXL-JOB介绍 XXL-JOB是一个轻量级分布式任务调度平台，其核心设计是开发迅速、学习简单、轻量级、易扩展，现已开放源代码并接入多家公">
<title>Xxl Job</title>

<link rel='canonical' href='http://localhost:1313/p/xxl-job/'>

<link rel="stylesheet" href="/scss/style.min.fc763ea2c204a52335f8c42a13bd7312c24c44f986c7ab8663c22008a88b723c.css"><meta property='og:title' content="Xxl Job">
<meta property='og:description' content="XXL-JOB XXL-JOB介绍 XXL-JOB是一个轻量级分布式任务调度平台，其核心设计是开发迅速、学习简单、轻量级、易扩展，现已开放源代码并接入多家公">
<meta property='og:url' content='http://localhost:1313/p/xxl-job/'>
<meta property='og:site_name' content='JiangYing&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='微服务中间件' /><meta property='article:published_time' content='2024-05-28T15:44:17&#43;08:00'/><meta property='article:modified_time' content='2024-05-28T15:44:17&#43;08:00'/><meta property='og:image' content='https://www.xuxueli.com/doc/static/xxl-job/images/xxl-logo.jpg' />
<meta name="twitter:title" content="Xxl Job">
<meta name="twitter:description" content="XXL-JOB XXL-JOB介绍 XXL-JOB是一个轻量级分布式任务调度平台，其核心设计是开发迅速、学习简单、轻量级、易扩展，现已开放源代码并接入多家公"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://www.xuxueli.com/doc/static/xxl-job/images/xxl-logo.jpg' />
    <link rel="shortcut icon" href="/img/JiangYing.jpg" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended">


        <div id="article-toolbar" style="position: sticky;top: 5px;z-index: 1000;">
            <a href="/" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>返回</span>
            </a>
        </div>
    

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li>
          <ol>
            <li><a href="#xxl-job介绍">XXL-JOB介绍</a></li>
            <li><a href="#利用docker搭建xxl-job">利用docker搭建XXL-JOB</a></li>
            <li><a href="#java连接xxl-job">java连接xxl-job</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/xxl-job/">
                
                    <img src="https://www.xuxueli.com/doc/static/xxl-job/images/xxl-logo.jpg" loading="lazy" alt="Featured image of post Xxl Job" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E5%AD%A6%E4%B9%A0/" style="background-color: #2a9d8f; color: #fff;">
                学习
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/xxl-job/">Xxl Job</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">May 28, 2024</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 8 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="xxl-job">XXL-JOB
</h1><h4 id="xxl-job介绍">XXL-JOB介绍
</h4><ul>
<li>
<p>XXL-JOB是一个轻量级分布式任务调度平台，其核心设计是开发迅速、学习简单、轻量级、易扩展，现已开放源代码并接入多家公司线上产品线，开箱即用</p>
</li>
<li>
<p>官网：https://www.xuxueli.com/xxl-job/</p>
</li>
<li>
<p>XXL-JOB主要由调度中心、执行器、任务</p>
<p><img src="https://s1.ax1x.com/2023/02/21/pSXooa6.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
<ul>
<li>调度中心
<ul>
<li>负责管理调度信息，按照调度配置发出调度请求，自身不承担业务代码</li>
<li>主要职责为执行器管理、任务管理、监控运维、日志管理等</li>
</ul>
</li>
<li>任务执行器
<ul>
<li>负责接收调度请求并执行任务逻辑</li>
<li>主要职责是注册服务、任务执行服务（接收到任务后会放入线程池中的任务队列）、执行结果上报、日志服务等</li>
</ul>
</li>
<li>任务
<ul>
<li>负责执行具体的业务逻辑</li>
</ul>
</li>
</ul>
</li>
<li>
<p>调度中心与执行器之间的工作流程如下
<a class="link" href="https://s1.ax1x.com/2023/02/21/pSXTYe1.png"  target="_blank" rel="noopener"
    ><img src="https://s1.ax1x.com/2023/02/21/pSXTYe1.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></a></p>
</li>
<li>
<p>执行流程</p>
<ol>
<li>任务执行器根据配置的调度中心的地址，自动注册到调度中心</li>
<li>达到任务出发条件，调度中心下发任务</li>
<li>执行器基于线程池执行任务，并把执行结果放入内存队列、把执行日志写入日志文件中</li>
<li>执行器消费内存队列中的执行结果，主动上报给调度中心</li>
<li>当用户在调度中心查看任务日志，调度中心请求任务执行器，任务执行器读取任务日志文件并返回日志详情</li>
</ol>
</li>
</ul>
<h4 id="利用docker搭建xxl-job">利用docker搭建XXL-JOB
</h4><h5 id="docket命令">docket命令
</h5><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl">docker search xxl-job   查看xxl-job <span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>docker pull xuxueli/xxl-job-admin:2.4.0  拉取 2.4.0版本<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>docker run -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -p 8088:8088 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -v /tool/xxl-job/logs:/data/applogs <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -v /tool/xxl-job/application.properties:/xxl-job/xxl-job-admin/src/main/resources/application.properties <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="nv">SPRING_DATASOURCE_URL</span><span class="o">=</span><span class="s1">&#39;jdbc:mysql://192.168.75.130:3306/xxl_job?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="nv">SPRING_DATASOURCE_USERNAME</span><span class="o">=</span>root <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="nv">SPRING_DATASOURCE_PASSWORD</span><span class="o">=</span><span class="m">123456</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    xuxueli/xxl-job-admin:2.4.0<span class="err">
</span></span></span></code></pre></div><h5 id="创建xxl_job数据库">创建xxl_job数据库
</h5><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job</span><span class="o">`</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">character</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w"> </span><span class="k">collate</span><span class="w"> </span><span class="n">utf8mb4_unicode_ci</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">SET</span><span class="w"> </span><span class="n">NAMES</span><span class="w"> </span><span class="n">utf8mb4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job_info</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="kp">AUTO_INCREMENT</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">job_group</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器主键ID&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">job_desc</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">add_time</span><span class="o">`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">update_time</span><span class="o">`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">author</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;作者&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">alarm_email</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;报警邮件&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">schedule_type</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;NONE&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;调度类型&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">schedule_conf</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;调度配置，值含义取决于调度类型&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">misfire_strategy</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;DO_NOTHING&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;调度过期策略&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">executor_route_strategy</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器路由策略&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">executor_handler</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器任务handler&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">executor_param</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">512</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器任务参数&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">executor_block_strategy</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;阻塞处理策略&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">executor_timeout</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;任务执行超时时间，单位秒&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">executor_fail_retry_count</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;失败重试次数&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">glue_type</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;GLUE类型&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">glue_source</span><span class="o">`</span><span class="w"> </span><span class="kt">mediumtext</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;GLUE源代码&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">glue_remark</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;GLUE备注&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">glue_updatetime</span><span class="o">`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;GLUE更新时间&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">child_jobid</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;子任务ID，多个逗号分隔&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">trigger_status</span><span class="o">`</span><span class="w"> </span><span class="kt">tinyint</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;调度状态：0-停止，1-运行&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">trigger_last_time</span><span class="o">`</span><span class="w"> </span><span class="kt">bigint</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;上次调度时间&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">trigger_next_time</span><span class="o">`</span><span class="w"> </span><span class="kt">bigint</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;下次调度时间&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="kp">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="kp">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job_log</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="kt">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="kp">AUTO_INCREMENT</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">job_group</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器主键ID&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">job_id</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;任务，主键ID&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">executor_address</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器地址，本次执行的地址&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">executor_handler</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器任务handler&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">executor_param</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">512</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器任务参数&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">executor_sharding_param</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器任务分片参数，格式如 1/2&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">executor_fail_retry_count</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;失败重试次数&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">trigger_time</span><span class="o">`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;调度-时间&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">trigger_code</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;调度-结果&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">trigger_msg</span><span class="o">`</span><span class="w"> </span><span class="kt">text</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;调度-日志&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">handle_time</span><span class="o">`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行-时间&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">handle_code</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行-状态&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">handle_msg</span><span class="o">`</span><span class="w"> </span><span class="kt">text</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行-日志&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">alarm_status</span><span class="o">`</span><span class="w"> </span><span class="kt">tinyint</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;告警状态：0-默认、1-无需告警、2-告警成功、3-告警失败&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">KEY</span><span class="w"> </span><span class="o">`</span><span class="n">I_trigger_time</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">trigger_time</span><span class="o">`</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">KEY</span><span class="w"> </span><span class="o">`</span><span class="n">I_handle_code</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">handle_code</span><span class="o">`</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="kp">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="kp">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job_log_report</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="kp">AUTO_INCREMENT</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">trigger_day</span><span class="o">`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;调度-时间&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">running_count</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;运行中-日志数量&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">suc_count</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行成功-日志数量&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">fail_count</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行失败-日志数量&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">update_time</span><span class="o">`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="o">`</span><span class="n">i_trigger_day</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">trigger_day</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="n">BTREE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="kp">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="kp">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job_logglue</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="kp">AUTO_INCREMENT</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">job_id</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;任务，主键ID&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">glue_type</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;GLUE类型&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">glue_source</span><span class="o">`</span><span class="w"> </span><span class="kt">mediumtext</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;GLUE源代码&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">glue_remark</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;GLUE备注&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">add_time</span><span class="o">`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">update_time</span><span class="o">`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="kp">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="kp">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job_registry</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="kp">AUTO_INCREMENT</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">registry_group</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">registry_key</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">registry_value</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">update_time</span><span class="o">`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">KEY</span><span class="w"> </span><span class="o">`</span><span class="n">i_g_k_v</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">registry_group</span><span class="o">`</span><span class="p">,</span><span class="o">`</span><span class="n">registry_key</span><span class="o">`</span><span class="p">,</span><span class="o">`</span><span class="n">registry_value</span><span class="o">`</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="kp">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="kp">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job_group</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="kp">AUTO_INCREMENT</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">app_name</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器AppName&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">title</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器名称&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">address_type</span><span class="o">`</span><span class="w"> </span><span class="kt">tinyint</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器地址类型：0=自动注册、1=手动录入&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">address_list</span><span class="o">`</span><span class="w"> </span><span class="kt">text</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;执行器地址列表，多地址逗号分隔&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">update_time</span><span class="o">`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="kp">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="kp">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job_user</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="kp">AUTO_INCREMENT</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">username</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;账号&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">password</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;密码&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">role</span><span class="o">`</span><span class="w"> </span><span class="kt">tinyint</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;角色：0-普通用户、1-管理员&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">permission</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;权限：执行器ID列表，多个逗号分割&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="o">`</span><span class="n">i_username</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">username</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="n">BTREE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="kp">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="kp">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job_lock</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">lock_name</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;锁名称&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">lock_name</span><span class="o">`</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="kp">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="kp">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job_group</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">app_name</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">title</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">address_type</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">address_list</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">update_time</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;xxl-job-executor-sample&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;示例执行器&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-11-03 22:21:31&#39;</span><span class="w"> </span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job_info</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">job_group</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">job_desc</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">add_time</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">update_time</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">author</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">alarm_email</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">schedule_type</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">schedule_conf</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">misfire_strategy</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">executor_route_strategy</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">executor_handler</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">executor_param</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">executor_block_strategy</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">executor_timeout</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">executor_fail_retry_count</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">glue_type</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">glue_source</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">glue_remark</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">glue_updatetime</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">child_jobid</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;测试任务1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-11-03 22:21:31&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-11-03 22:21:31&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;XXL&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;CRON&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;0 0 0 * * ? *&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;DO_NOTHING&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;FIRST&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;demoJobHandler&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SERIAL_EXECUTION&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;BEAN&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;GLUE代码初始化&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-11-03 22:21:31&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job_user</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">username</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">password</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">role</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">permission</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;admin&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;e10adc3949ba59abbe56e057f20f883e&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">NULL</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="o">`</span><span class="n">xxl_job_lock</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">`</span><span class="n">lock_name</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;schedule_lock&#39;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><h5 id="网站登录">网站登录
</h5><p>根据数据库脚本创建数据库，修改数据库连接信息和端口，启动xxl-job-admin，访问http://local:18088/xxl-job-admin/</p>
<ul>
<li>账号密码：admin/123456
<a class="link" href="https://s1.ax1x.com/2023/02/21/pSjEojJ.png"  target="_blank" rel="noopener"
    ><img src="https://s1.ax1x.com/2023/02/21/pSjEojJ.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></a></li>
</ul>
<h4 id="java连接xxl-job">java连接xxl-job
</h4><h5 id="添加依赖">添加依赖
</h5><p>（父工程中完成了版本控制，这里的版本是2.4.0）</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">XML
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>com.xuxueli<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>xxl-job-core<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></div><h5 id="yaml文件添加">yaml文件添加
</h5><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">xxl</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">job</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">admin</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">addresses</span><span class="p">:</span><span class="w"> </span><span class="l">http://...........:8088/xxl-job-admin/ </span><span class="w"> </span><span class="c">#... 更换服务器地址  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">executor</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">appname</span><span class="p">:</span><span class="w"> </span><span class="l">media-process-service        </span><span class="w"> </span><span class="c">#执行器名字</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">address</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">ip</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">9999</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">logpath</span><span class="p">:</span><span class="w"> </span><span class="l">/data/applogs/xxl-job-jobhandler</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">logretentiondays</span><span class="p">:</span><span class="w"> </span><span class="m">30</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">accessToken</span><span class="p">:</span><span class="w"> </span><span class="l">default_token</span><span class="w">
</span></span></span></code></pre></div><h5 id="配置xxl-job的执行器">配置xxl-job的执行器
</h5><ul>
<li>将示例工程下的配置类拷贝到media-service工程下，该类中的属性就是获取配置文件中的配置得到的，同时提供了一个执行器的Bean</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">JAVA
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@Configuration
</span></span><span class="line"><span class="cl">public class XxlJobConfig {
</span></span><span class="line"><span class="cl">    private Logger logger = LoggerFactory.getLogger(XxlJobConfig.class);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Value(&#34;${xxl.job.admin.addresses}&#34;)
</span></span><span class="line"><span class="cl">    private String adminAddresses;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Value(&#34;${xxl.job.accessToken}&#34;)
</span></span><span class="line"><span class="cl">    private String accessToken;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Value(&#34;${xxl.job.executor.appname}&#34;)
</span></span><span class="line"><span class="cl">    private String appname;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Value(&#34;${xxl.job.executor.address}&#34;)
</span></span><span class="line"><span class="cl">    private String address;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Value(&#34;${xxl.job.executor.ip}&#34;)
</span></span><span class="line"><span class="cl">    private String ip;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Value(&#34;${xxl.job.executor.port}&#34;)
</span></span><span class="line"><span class="cl">    private int port;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Value(&#34;${xxl.job.executor.logpath}&#34;)
</span></span><span class="line"><span class="cl">    private String logPath;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Value(&#34;${xxl.job.executor.logretentiondays}&#34;)
</span></span><span class="line"><span class="cl">    private int logRetentionDays;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Bean
</span></span><span class="line"><span class="cl">    public XxlJobSpringExecutor xxlJobExecutor() {
</span></span><span class="line"><span class="cl">        logger.info(&#34;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xxl-job config init.&#34;);
</span></span><span class="line"><span class="cl">        XxlJobSpringExecutor xxlJobSpringExecutor = new XxlJobSpringExecutor();
</span></span><span class="line"><span class="cl">        xxlJobSpringExecutor.setAdminAddresses(adminAddresses);
</span></span><span class="line"><span class="cl">        xxlJobSpringExecutor.setAppname(appname);
</span></span><span class="line"><span class="cl">        xxlJobSpringExecutor.setAddress(address);
</span></span><span class="line"><span class="cl">        xxlJobSpringExecutor.setIp(ip);
</span></span><span class="line"><span class="cl">        xxlJobSpringExecutor.setPort(port);
</span></span><span class="line"><span class="cl">        xxlJobSpringExecutor.setAccessToken(accessToken);
</span></span><span class="line"><span class="cl">        xxlJobSpringExecutor.setLogPath(logPath);
</span></span><span class="line"><span class="cl">        xxlJobSpringExecutor.setLogRetentionDays(logRetentionDays);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        return xxlJobSpringExecutor;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    /**
</span></span><span class="line"><span class="cl">    * 针对多网卡、容器内部署等情况，可借助 &#34;spring-cloud-commons&#34; 提供的 &#34;InetUtils&#34; 组件灵活定制注册IP；
</span></span><span class="line"><span class="cl">    *
</span></span><span class="line"><span class="cl">    *      1、引入依赖：
</span></span><span class="line"><span class="cl">    *          &lt;dependency&gt;
</span></span><span class="line"><span class="cl">    *             &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
</span></span><span class="line"><span class="cl">    *             &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;
</span></span><span class="line"><span class="cl">    *             &lt;version&gt;${version}&lt;/version&gt;
</span></span><span class="line"><span class="cl">    *         &lt;/dependency&gt;
</span></span><span class="line"><span class="cl">    *
</span></span><span class="line"><span class="cl">    *      2、配置文件，或者容器启动变量
</span></span><span class="line"><span class="cl">    *          spring.cloud.inetutils.preferred-networks: &#39;xxx.xxx.xxx.&#39;
</span></span><span class="line"><span class="cl">    *
</span></span><span class="line"><span class="cl">    *      3、获取IP
</span></span><span class="line"><span class="cl">    *          String ip_ = inetUtils.findFirstNonLoopbackHostInfo().getIpAddress();
</span></span><span class="line"><span class="cl">    */
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><h5 id="进入调度中心添加执行器">进入调度中心，添加执行器
</h5><p><a class="link" href="https://s1.ax1x.com/2023/02/21/pSjm9u4.png"  target="_blank" rel="noopener"
    ><img src="https://s1.ax1x.com/2023/02/21/pSjm9u4.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></a></p>
<h5 id="重启可以看到执行器在调入中心注册成功">重启，可以看到执行器在调入中心注册成功
</h5><p><a class="link" href="https://s1.ax1x.com/2023/02/21/pSjmuKe.png"  target="_blank" rel="noopener"
    ><img src="https://s1.ax1x.com/2023/02/21/pSjmuKe.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></a></p>
<h5 id="执行任务">执行任务
</h5><ul>
<li>下面编写任务，任务类的编写方法参考示例工程</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">JAVA</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">com</span><span class="p">.</span><span class="nx">xxl</span><span class="p">.</span><span class="nx">job</span><span class="p">.</span><span class="nx">executor</span><span class="p">.</span><span class="nx">service</span><span class="p">.</span><span class="nx">jobhandler</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">com</span><span class="p">.</span><span class="nx">xxl</span><span class="p">.</span><span class="nx">job</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">XxlJobHelper</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">com</span><span class="p">.</span><span class="nx">xxl</span><span class="p">.</span><span class="nx">job</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">annotation</span><span class="p">.</span><span class="nx">XxlJob</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">slf4j</span><span class="p">.</span><span class="nx">Logger</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">slf4j</span><span class="p">.</span><span class="nx">LoggerFactory</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">springframework</span><span class="p">.</span><span class="nx">stereotype</span><span class="p">.</span><span class="nx">Component</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">java</span><span class="p">.</span><span class="nx">io</span><span class="p">.</span><span class="nx">BufferedInputStream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">java</span><span class="p">.</span><span class="nx">io</span><span class="p">.</span><span class="nx">BufferedReader</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">java</span><span class="p">.</span><span class="nx">io</span><span class="p">.</span><span class="nx">DataOutputStream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">java</span><span class="p">.</span><span class="nx">io</span><span class="p">.</span><span class="nx">InputStreamReader</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">java</span><span class="p">.</span><span class="nx">net</span><span class="p">.</span><span class="nx">HttpURLConnection</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">java</span><span class="p">.</span><span class="nx">net</span><span class="p">.</span><span class="nx">URL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">java</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">Arrays</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">java</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">concurrent</span><span class="p">.</span><span class="nx">TimeUnit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * XxlJob开发示例（Bean模式）
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 开发步骤：
</span></span></span><span class="line"><span class="cl"><span class="cm"> *      1、任务开发：在Spring Bean实例中，开发Job方法；
</span></span></span><span class="line"><span class="cl"><span class="cm"> *      2、注解配置：为Job方法添加注解 &#34;@XxlJob(value=&#34;自定义jobhandler名称&#34;, init = &#34;JobHandler初始化方法&#34;, destroy = &#34;JobHandler销毁方法&#34;)&#34;，注解value值对应的是调度中心新建任务的JobHandler属性的值。
</span></span></span><span class="line"><span class="cl"><span class="cm"> *      3、执行日志：需要通过 &#34;XxlJobHelper.log&#34; 打印执行日志；
</span></span></span><span class="line"><span class="cl"><span class="cm"> *      4、任务结果：默认任务结果为 &#34;成功&#34; 状态，不需要主动设置；如有诉求，比如设置任务结果为失败，可以通过 &#34;XxlJobHelper.handleFail/handleSuccess&#34; 自主设置任务结果；
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @author xuxueli 2019-12-11 21:52:51
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="err">@</span><span class="nx">Component</span>
</span></span><span class="line"><span class="cl"><span class="nx">public</span> <span class="nx">class</span> <span class="nx">SampleXxlJob</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">private</span> <span class="nx">static</span> <span class="nx">Logger</span> <span class="nx">logger</span> <span class="p">=</span> <span class="nx">LoggerFactory</span><span class="p">.</span><span class="nf">getLogger</span><span class="p">(</span><span class="nx">SampleXxlJob</span><span class="p">.</span><span class="nx">class</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 1、简单任务示例（Bean模式）
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="err">@</span><span class="nf">XxlJob</span><span class="p">(</span><span class="s">&#34;demoJobHandler&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">public</span> <span class="nx">void</span> <span class="nf">demoJobHandler</span><span class="p">()</span> <span class="nx">throws</span> <span class="nx">Exception</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;XXL-JOB, Hello World.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nx">i</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;beat at:&#34;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">TimeUnit</span><span class="p">.</span><span class="nx">SECONDS</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// default success
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 2、分片广播任务
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="err">@</span><span class="nf">XxlJob</span><span class="p">(</span><span class="s">&#34;shardingJobHandler&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">public</span> <span class="nx">void</span> <span class="nf">shardingJobHandler</span><span class="p">()</span> <span class="nx">throws</span> <span class="nx">Exception</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 分片参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="nx">shardIndex</span> <span class="p">=</span> <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">getShardIndex</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="nx">shardTotal</span> <span class="p">=</span> <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">getShardTotal</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;分片参数：当前分片序号 = {}, 总分片数 = {}&#34;</span><span class="p">,</span> <span class="nx">shardIndex</span><span class="p">,</span> <span class="nx">shardTotal</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 业务逻辑
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nx">i</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">shardTotal</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">==</span> <span class="nx">shardIndex</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;第 {} 片, 命中分片开始处理&#34;</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;第 {} 片, 忽略&#34;</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 3、命令行任务
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="err">@</span><span class="nf">XxlJob</span><span class="p">(</span><span class="s">&#34;commandJobHandler&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">public</span> <span class="nx">void</span> <span class="nf">commandJobHandler</span><span class="p">()</span> <span class="nx">throws</span> <span class="nx">Exception</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">String</span> <span class="nx">command</span> <span class="p">=</span> <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">getJobParam</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="nx">exitValue</span> <span class="p">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">BufferedReader</span> <span class="nx">bufferedReader</span> <span class="p">=</span> <span class="nx">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// command process
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">ProcessBuilder</span> <span class="nx">processBuilder</span> <span class="p">=</span> <span class="nx">new</span> <span class="nf">ProcessBuilder</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="nx">processBuilder</span><span class="p">.</span><span class="nf">command</span><span class="p">(</span><span class="nx">command</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">processBuilder</span><span class="p">.</span><span class="nf">redirectErrorStream</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nx">Process</span> <span class="nx">process</span> <span class="p">=</span> <span class="nx">processBuilder</span><span class="p">.</span><span class="nf">start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//Process process = Runtime.getRuntime().exec(command);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">            <span class="nx">BufferedInputStream</span> <span class="nx">bufferedInputStream</span> <span class="p">=</span> <span class="nx">new</span> <span class="nf">BufferedInputStream</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nf">getInputStream</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">            <span class="nx">bufferedReader</span> <span class="p">=</span> <span class="nx">new</span> <span class="nf">BufferedReader</span><span class="p">(</span><span class="nx">new</span> <span class="nf">InputStreamReader</span><span class="p">(</span><span class="nx">bufferedInputStream</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// command log
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">String</span> <span class="nx">line</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nf">while</span> <span class="p">((</span><span class="nx">line</span> <span class="p">=</span> <span class="nx">bufferedReader</span><span class="p">.</span><span class="nf">readLine</span><span class="p">())</span> <span class="o">!=</span> <span class="nx">null</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// command exit
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">process</span><span class="p">.</span><span class="nf">waitFor</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="nx">exitValue</span> <span class="p">=</span> <span class="nx">process</span><span class="p">.</span><span class="nf">exitValue</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="nf">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="nx">finally</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">bufferedReader</span> <span class="o">!=</span> <span class="nx">null</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">bufferedReader</span><span class="p">.</span><span class="nb">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">exitValue</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// default success
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">handleFail</span><span class="p">(</span><span class="s">&#34;command exit value(&#34;</span><span class="o">+</span><span class="nx">exitValue</span><span class="o">+</span><span class="s">&#34;) is failed&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 4、跨平台Http任务
</span></span></span><span class="line"><span class="cl"><span class="cm">     *  参数示例：
</span></span></span><span class="line"><span class="cl"><span class="cm">     *      &#34;url: http://www.baidu.com\n&#34; +
</span></span></span><span class="line"><span class="cl"><span class="cm">     *      &#34;method: get\n&#34; +
</span></span></span><span class="line"><span class="cl"><span class="cm">     *      &#34;data: content\n&#34;;
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="err">@</span><span class="nf">XxlJob</span><span class="p">(</span><span class="s">&#34;httpJobHandler&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">public</span> <span class="nx">void</span> <span class="nf">httpJobHandler</span><span class="p">()</span> <span class="nx">throws</span> <span class="nx">Exception</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// param parse
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">String</span> <span class="nx">param</span> <span class="p">=</span> <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">getJobParam</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">param</span><span class="o">==</span><span class="nx">null</span> <span class="o">||</span> <span class="nx">param</span><span class="p">.</span><span class="nf">trim</span><span class="p">().</span><span class="nf">length</span><span class="p">()</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;param[&#34;</span><span class="o">+</span> <span class="nx">param</span> <span class="o">+</span><span class="s">&#34;] invalid.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">handleFail</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">String</span><span class="p">[]</span> <span class="nx">httpParams</span> <span class="p">=</span> <span class="nx">param</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s">&#34;\n&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">String</span> <span class="nx">url</span> <span class="p">=</span> <span class="nx">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">String</span> <span class="nx">method</span> <span class="p">=</span> <span class="nx">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">String</span> <span class="nx">data</span> <span class="p">=</span> <span class="nx">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="nx">String</span> <span class="nx">httpParam</span><span class="p">:</span> <span class="nx">httpParams</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">httpParam</span><span class="p">.</span><span class="nf">startsWith</span><span class="p">(</span><span class="s">&#34;url:&#34;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">url</span> <span class="p">=</span> <span class="nx">httpParam</span><span class="p">.</span><span class="nf">substring</span><span class="p">(</span><span class="nx">httpParam</span><span class="p">.</span><span class="nf">indexOf</span><span class="p">(</span><span class="s">&#34;url:&#34;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">4</span><span class="p">).</span><span class="nf">trim</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">httpParam</span><span class="p">.</span><span class="nf">startsWith</span><span class="p">(</span><span class="s">&#34;method:&#34;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">method</span> <span class="p">=</span> <span class="nx">httpParam</span><span class="p">.</span><span class="nf">substring</span><span class="p">(</span><span class="nx">httpParam</span><span class="p">.</span><span class="nf">indexOf</span><span class="p">(</span><span class="s">&#34;method:&#34;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">7</span><span class="p">).</span><span class="nf">trim</span><span class="p">().</span><span class="nf">toUpperCase</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">httpParam</span><span class="p">.</span><span class="nf">startsWith</span><span class="p">(</span><span class="s">&#34;data:&#34;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">data</span> <span class="p">=</span> <span class="nx">httpParam</span><span class="p">.</span><span class="nf">substring</span><span class="p">(</span><span class="nx">httpParam</span><span class="p">.</span><span class="nf">indexOf</span><span class="p">(</span><span class="s">&#34;data:&#34;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">5</span><span class="p">).</span><span class="nf">trim</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// param valid
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="nx">url</span><span class="o">==</span><span class="nx">null</span> <span class="o">||</span> <span class="nx">url</span><span class="p">.</span><span class="nf">trim</span><span class="p">().</span><span class="nf">length</span><span class="p">()</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;url[&#34;</span><span class="o">+</span> <span class="nx">url</span> <span class="o">+</span><span class="s">&#34;] invalid.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">handleFail</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">method</span><span class="o">==</span><span class="nx">null</span> <span class="o">||</span> <span class="p">!</span><span class="nx">Arrays</span><span class="p">.</span><span class="nf">asList</span><span class="p">(</span><span class="s">&#34;GET&#34;</span><span class="p">,</span> <span class="s">&#34;POST&#34;</span><span class="p">).</span><span class="nf">contains</span><span class="p">(</span><span class="nx">method</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;method[&#34;</span><span class="o">+</span> <span class="nx">method</span> <span class="o">+</span><span class="s">&#34;] invalid.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">handleFail</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nx">boolean</span> <span class="nx">isPostMethod</span> <span class="p">=</span> <span class="nx">method</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="s">&#34;POST&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// request
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">HttpURLConnection</span> <span class="nx">connection</span> <span class="p">=</span> <span class="nx">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">BufferedReader</span> <span class="nx">bufferedReader</span> <span class="p">=</span> <span class="nx">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// connection
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">URL</span> <span class="nx">realUrl</span> <span class="p">=</span> <span class="nx">new</span> <span class="nf">URL</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">connection</span> <span class="p">=</span> <span class="p">(</span><span class="nx">HttpURLConnection</span><span class="p">)</span> <span class="nx">realUrl</span><span class="p">.</span><span class="nf">openConnection</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// connection setting
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">connection</span><span class="p">.</span><span class="nf">setRequestMethod</span><span class="p">(</span><span class="nx">method</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">connection</span><span class="p">.</span><span class="nf">setDoOutput</span><span class="p">(</span><span class="nx">isPostMethod</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">connection</span><span class="p">.</span><span class="nf">setDoInput</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">connection</span><span class="p">.</span><span class="nf">setUseCaches</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">connection</span><span class="p">.</span><span class="nf">setReadTimeout</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">connection</span><span class="p">.</span><span class="nf">setConnectTimeout</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">connection</span><span class="p">.</span><span class="nf">setRequestProperty</span><span class="p">(</span><span class="s">&#34;connection&#34;</span><span class="p">,</span> <span class="s">&#34;Keep-Alive&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">connection</span><span class="p">.</span><span class="nf">setRequestProperty</span><span class="p">(</span><span class="s">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s">&#34;application/json;charset=UTF-8&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">connection</span><span class="p">.</span><span class="nf">setRequestProperty</span><span class="p">(</span><span class="s">&#34;Accept-Charset&#34;</span><span class="p">,</span> <span class="s">&#34;application/json;charset=UTF-8&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// do connection
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">connection</span><span class="p">.</span><span class="nf">connect</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// data
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="nx">isPostMethod</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="o">!=</span><span class="nx">null</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nf">trim</span><span class="p">().</span><span class="nf">length</span><span class="p">()&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">DataOutputStream</span> <span class="nx">dataOutputStream</span> <span class="p">=</span> <span class="nx">new</span> <span class="nf">DataOutputStream</span><span class="p">(</span><span class="nx">connection</span><span class="p">.</span><span class="nf">getOutputStream</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">                <span class="nx">dataOutputStream</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nf">getBytes</span><span class="p">(</span><span class="s">&#34;UTF-8&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">                <span class="nx">dataOutputStream</span><span class="p">.</span><span class="nf">flush</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="nx">dataOutputStream</span><span class="p">.</span><span class="nb">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// valid StatusCode
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kt">int</span> <span class="nx">statusCode</span> <span class="p">=</span> <span class="nx">connection</span><span class="p">.</span><span class="nf">getResponseCode</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">statusCode</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">throw</span> <span class="nx">new</span> <span class="nf">RuntimeException</span><span class="p">(</span><span class="s">&#34;Http Request StatusCode(&#34;</span> <span class="o">+</span> <span class="nx">statusCode</span> <span class="o">+</span> <span class="s">&#34;) Invalid.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// result
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">bufferedReader</span> <span class="p">=</span> <span class="nx">new</span> <span class="nf">BufferedReader</span><span class="p">(</span><span class="nx">new</span> <span class="nf">InputStreamReader</span><span class="p">(</span><span class="nx">connection</span><span class="p">.</span><span class="nf">getInputStream</span><span class="p">(),</span> <span class="s">&#34;UTF-8&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="nx">StringBuilder</span> <span class="nx">result</span> <span class="p">=</span> <span class="nx">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="nx">String</span> <span class="nx">line</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nf">while</span> <span class="p">((</span><span class="nx">line</span> <span class="p">=</span> <span class="nx">bufferedReader</span><span class="p">.</span><span class="nf">readLine</span><span class="p">())</span> <span class="o">!=</span> <span class="nx">null</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">result</span><span class="p">.</span><span class="nb">append</span><span class="p">(</span><span class="nx">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="nx">String</span> <span class="nx">responseMsg</span> <span class="p">=</span> <span class="nx">result</span><span class="p">.</span><span class="nf">toString</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">responseMsg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="nf">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">handleFail</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="nx">finally</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="nx">bufferedReader</span> <span class="o">!=</span> <span class="nx">null</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">bufferedReader</span><span class="p">.</span><span class="nb">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="nx">connection</span> <span class="o">!=</span> <span class="nx">null</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">connection</span><span class="p">.</span><span class="nf">disconnect</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="nf">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nx">e2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">e2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 5、生命周期任务示例：任务初始化与销毁时，支持自定义相关逻辑；
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="err">@</span><span class="nf">XxlJob</span><span class="p">(</span><span class="nx">value</span> <span class="p">=</span> <span class="s">&#34;demoJobHandler2&#34;</span><span class="p">,</span> <span class="nx">init</span> <span class="p">=</span> <span class="s">&#34;init&#34;</span><span class="p">,</span> <span class="nx">destroy</span> <span class="p">=</span> <span class="s">&#34;destroy&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">public</span> <span class="nx">void</span> <span class="nf">demoJobHandler2</span><span class="p">()</span> <span class="nx">throws</span> <span class="nx">Exception</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">XxlJobHelper</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;XXL-JOB, Hello World.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">public</span> <span class="nx">void</span> <span class="nf">init</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="s">&#34;init&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">public</span> <span class="nx">void</span> <span class="nf">destroy</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="s">&#34;destroy&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><ul>
<li>我们现在参考简单示例自己编写代码，在media-service下新建包<code>com.xuecheng.media.service.jobhandler</code>，在该包下定义我们的任务类</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">JAVA</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">com</span><span class="p">.</span><span class="nx">xuecheng</span><span class="p">.</span><span class="nx">media</span><span class="p">.</span><span class="nx">service</span><span class="p">.</span><span class="nx">jobhandler</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">com</span><span class="p">.</span><span class="nx">xxl</span><span class="p">.</span><span class="nx">job</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">annotation</span><span class="p">.</span><span class="nx">XxlJob</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">lombok</span><span class="p">.</span><span class="nx">extern</span><span class="p">.</span><span class="nx">slf4j</span><span class="p">.</span><span class="nx">Slf4j</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">springframework</span><span class="p">.</span><span class="nx">stereotype</span><span class="p">.</span><span class="nx">Component</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 测试执行器
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="err">@</span><span class="nx">Slf4j</span>
</span></span><span class="line"><span class="cl"><span class="err">@</span><span class="nx">Component</span>
</span></span><span class="line"><span class="cl"><span class="nx">public</span> <span class="nx">class</span> <span class="nx">SimpleJob</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">@</span><span class="nf">XxlJob</span><span class="p">(</span><span class="s">&#34;testJob&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">public</span> <span class="nx">void</span> <span class="nf">testJob</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">log</span><span class="p">.</span><span class="nf">debug</span><span class="p">(</span><span class="s">&#34;开始执行.......&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><ul>
<li>然后进入调度中心添加任务，进入任务管理，新增任务信息
<a class="link" href="https://s1.ax1x.com/2023/02/21/pSjn4Og.png"  target="_blank" rel="noopener"
    ><img src="https://s1.ax1x.com/2023/02/21/pSjn4Og.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></a></li>
<li>其中JobHandler中填写@XxlJob注解中的名称</li>
<li>随后启动任务，控制台可以看到执行器的方法执行
<a class="link" href="https://s1.ax1x.com/2023/02/22/pSjhRZ6.png"  target="_blank" rel="noopener"
    ><img src="https://s1.ax1x.com/2023/02/22/pSjhRZ6.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></a></li>
</ul>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E9%97%B4%E4%BB%B6/">微服务中间件</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <script src='//unpkg.com/@waline/client@v2/dist/waline.js'></script>
<link href='//unpkg.com/@waline/client@v2/dist/waline.css' rel='stylesheet'/>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
        --waline-font-size: var(--article-font-size);
    }
    .waline-container .wl-count {
        color: var(--card-text-color-main);
    }
</style><script>
    
    Waline.init({"copyright":false,"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["/source/Sticker-100/"],"lang":"zh-CN","locale":{"admin":"👻屑博主","placeholder":"🎉留下你的脚印."},"pageview":true,"reaction":false,"requiredMeta":["name","email"],"search":false,"serverURL":"https://comment.linsnow.cn"});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2024 JiangYing
    </section>
    
    <section class="powerby">
        
            <a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2023006542</a> <br/>
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
